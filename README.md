# Multi-Agent AI System on Google Cloud Platform

> üá∑üá∫ –†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –Ω–∏–∂–µ | üá∫üá∏ English version below

## üá∑üá∫ –†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è

### –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–∞ –±–∞–∑–µ Google Cloud, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥–∑–∞–¥–∞—á–∏ –º–µ–∂–¥—É —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏ –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (FastAPI –Ω–∞ Cloud Run) —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ Firestore, –ø—É–±–ª–∏–∫—É–µ—Ç –∑–∞–¥–∞–Ω–∏—è –≤ Pub/Sub, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —á–µ—Ä–µ–∑ Cloud Tasks –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Gemini –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è –∑–∞–¥–∞—á –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç–∞. –ß–µ—Ç—ã—Ä–µ –∞–≥–µ–Ω—Ç–∞ (Research, Analysis, Code, Validator) —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã –∫–∞–∫ Cloud Functions Gen2 –∏ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º (web, GitHub, BigQuery). –ï—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –±–µ–∑ GCP —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏ –¥–ª—è Firestore, Pub/Sub –∏ Gemini.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TD
    U[–ö–ª–∏–µ–Ω—Ç / SDK / Web UI] --> API[Orchestrator<br/>FastAPI + Cloud Run]
    API --> FS[(Firestore<br/>tasks & subtasks)]
    API --> PUB[(Pub/Sub<br/>topics)]
    API --> CT[Cloud Tasks<br/>agent-task-queue]
    API --> GEM[Gemini API]
    PUB --> RA[Research Agent<br/>Cloud Functions Gen2]
    PUB --> AA[Analysis Agent<br/>Cloud Functions Gen2]
    PUB --> CA[Code Agent<br/>Cloud Functions Gen2]
    PUB --> VA[Validator Agent<br/>Cloud Functions Gen2]
    RA --> FS
    AA --> FS
    CA --> FS
    VA --> FS
    FS --> API
    API --> RESP[–°–±–æ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞<br/>–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ]
```

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Secret Manager (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π), Artifact Registry (–æ–±—Ä–∞–∑—ã), Cloud Logging/Monitoring –∏ BigQuery.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á —Å –ø–æ–º–æ—â—å—é Gemini –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –∞–≥–µ–Ω—Ç–æ–≤.
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∑–∞–¥–∞—á —á–µ—Ä–µ–∑ Pub/Sub —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏: web-—Ä–µ—Å—É—Ä—Å—ã, GitHub API, –∑–∞–ø—Ä–æ—Å—ã BigQuery.
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ–∞–∫—Ç-—á–µ–∫–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç.
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ (Cloud Functions) –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (Cloud Run).
- –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (`LOCAL_MODE=1`) —Å in-memory —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ Firestore/PubSub/Gemini –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- REST API (`/tasks`, `/tasks/{id}`, `/webhook/agent-result`, `/health`) + –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (`/ui`) –∏ Python SDK.
- –ö–æ–¥–æ–≤—ã–π –∞–≥–µ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –º–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç ZIP (inline –∏–ª–∏ –≤ GCS).
- –î–æ—Å—Ç—É–ø–Ω—ã REST-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, –æ—Ç–º–µ–Ω—ã –∏ —Å–º–µ–Ω—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–æ–¥–∑–∞–¥–∞—á; UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è.




### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Orchestrator** (`orchestrator/main.py`) ‚Äî FastAPI —Å–µ—Ä–≤–∏—Å; —É–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á, —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Pub/Sub, –≤—ã–∑—ã–≤–∞–µ—Ç Gemini –¥–ª—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞, —Å–µ—Ä–≤–∏—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.
- **Research Agent** (`agents/research`) ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ web, GitHub –∏ BigQuery, —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —á–µ—Ä–µ–∑ Gemini –∏ –æ—Ç–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
- **Analysis Agent** (`agents/analysis`) ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É—è pandas/numpy –∏ Gemini.
- **Code Agent** (`agents/code`) ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç –∫–æ–¥, –≤—ã–¥–µ–ª—è–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
- **Validator Agent** (`agents/validator`) ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ —Ñ–∞–∫—Ç-—á–µ–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç.
- **Shared utilities** (`shared/`) ‚Äî –æ–±—â–∏–µ –º–æ–¥–µ–ª–∏, –º–µ–Ω–µ–¥–∂–µ—Ä—ã Firestore/PubSub/Cloud Tasks, –∫–ª–∏–µ–Ω—Ç Gemini, –∫–µ—à, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
- **SDK** (`sdk/`) ‚Äî Python-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å REST API.
- **Web UI** (`web/`) ‚Äî Vite/React –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–¥–∞—á; —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è —Ä—è–¥–æ–º —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (`terraform/`, `deploy.sh`, `scripts/`) ‚Äî Terraform-–º–æ–¥—É–ª–∏ –∏ bash/Powershell —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GCP –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ GCP)
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
   ```bash
   cp .env.local.example .env
   ```
2. –í `.env` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `LOCAL_MODE=1` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–¥–∞–π—Ç–µ `PROJECT_ID=local-dev`.
3. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python¬†3.11:
   ```bash
   python -m venv .venv
   source .venv/bin/activate        # Windows: .\.venv\Scripts\Activate.ps1
   pip install -r orchestrator/requirements.txt
   ```
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä:
   ```bash
   uvicorn orchestrator.main:app --reload --port ${PORT:-8080}
   ```
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:
   ```bash
   curl -X POST http://localhost:8080/tasks \
     -H "Content-Type: application/json" \
     -d '{"query": "–ù–∞–π–¥–∏ —Ç—Ä–∏ —Å–≤–µ–∂–∏—Ö AI-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è"}'
   ```
6. –ù–∞ Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `scripts/run_local.ps1`, —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å uvicorn.
7. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
   ```bash
   cd web
   npm install
   npm run dev
   ```

`LOCAL_MODE` –≤–∫–ª—é—á–∞–µ—Ç in-memory Firestore/PubSub/Cache –∏ –ø—Ä–æ—Å—Ç–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –Ω–∏–∫–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã GCP –∏ –∫–ª—é—á–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Google Cloud
1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ—Å—å –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   gcloud auth login
   gcloud auth application-default login
   gcloud config set project <PROJECT_ID>
   ```
2. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   export PROJECT_ID=<PROJECT_ID>
   export REGION=us-central1
   export GEMINI_API_KEY=<–≤–∞—à-–∫–ª—é—á>
   export GITHUB_TOKEN=<–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ>
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:
   ```bash
   bash deploy.sh
   ```
   –°–∫—Ä–∏–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç API, —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç `multi-agent-system`, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Pub/Sub, Cloud Tasks, Firestore, —Å–æ–±–∏—Ä–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –¥–µ–ø–ª–æ–∏—Ç Cloud Run –∏ Cloud Functions Gen2.
4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å Terraform:
   ```bash
   cd terraform
   terraform init
   terraform apply
   ```
5. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ (`ORCHESTRATOR_URL`, `PROJECT_ID`, —Å–µ–∫—Ä–µ—Ç—ã Gemini/GitHub) —á–µ—Ä–µ–∑ `gcloud functions deploy ... --set-env-vars/--update-secrets`.
6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Secret Manager –¥–ª—è `gemini-api-key` (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω) –∏ `github-token` (–ø–æ–≤—ã—à–µ–Ω–Ω—ã–µ –∫–≤–æ—Ç—ã GitHub).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é / –∑–∞–º–µ—Ç–∫–∏ |
|-----------|------------|------------------------|
| `PROJECT_ID` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä GCP –ø—Ä–æ–µ–∫—Ç–∞ | `your-project-id` (–ª–æ–∫–∞–ª—å–Ω–æ) |
| `REGION` | –†–µ–≥–∏–æ–Ω —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è Cloud Run/Functions/Tasks | `us-central1` |
| `LOCAL_MODE` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ Firestore/PubSub/Gemini | `0` |
| `PORT` | –ü–æ—Ä—Ç FastAPI –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ | `8080` |
| `ALLOWED_ORIGINS` | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ CORS origins –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–∞ | `*` |
| `GEMINI_API_KEY` | –ö–ª—é—á –¥–ª—è Gemini API | –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ –æ–±–ª–∞–∫–µ |
| `MODEL_ORCHESTRATOR` | –ú–æ–¥–µ–ª—å –¥–ª—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∑–∞–¥–∞—á –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞ | –Ω–∞—Å–ª–µ–¥—É–µ—Ç `GEMINI_MODEL` |
| `MODEL_RESEARCH` | –ú–æ–¥–µ–ª—å –¥–ª—è research-–∞–≥–µ–Ω—Ç–∞ | –Ω–∞—Å–ª–µ–¥—É–µ—Ç `GEMINI_MODEL` |
| `MODEL_ANALYSIS` | –ú–æ–¥–µ–ª—å –¥–ª—è analysis-–∞–≥–µ–Ω—Ç–∞ | –Ω–∞—Å–ª–µ–¥—É–µ—Ç `GEMINI_MODEL` |
| `MODEL_CODE` | –ú–æ–¥–µ–ª—å –¥–ª—è code-–∞–≥–µ–Ω—Ç–∞ | –Ω–∞—Å–ª–µ–¥—É–µ—Ç `GEMINI_MODEL` |
| `MODEL_VALIDATOR` | –ú–æ–¥–µ–ª—å –¥–ª—è validator-–∞–≥–µ–Ω—Ç–∞ | –Ω–∞—Å–ª–µ–¥—É–µ—Ç `GEMINI_MODEL` |
| `PACKAGE_ARCHIVE_BUCKET` | –ò–º—è GCS bucket –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è ZIP –ø–∞–∫–µ—Ç–æ–≤ | –Ω–µ –∑–∞–¥–∞–Ω–æ (–∞—Ä—Ö–∏–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è inline) |
| `GITHUB_TOKEN` | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è GitHub API | –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| `ORCHESTRATOR_URL` | URL Cloud Run, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞—é—Ç –∞–≥–µ–Ω—Ç—ã | –∑–∞–¥–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è |
| `GOOGLE_APPLICATION_CREDENTIALS` | JSON —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ | –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |


### –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
1. –ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `POST /tasks` –∏ –ø–æ–ª—É—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏.
2. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç `TaskContext` –≤ Firestore –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É—Å –≤ `in_progress`.
3. Gemini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∑–∞–¥–∞—á; –∫–∞–∂–¥–∞—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç `SubTask` –∏ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π Pub/Sub —Ç–æ–ø–∏–∫ (–ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).
4. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–∞–±–æ—Ç—É (web/GitHub/BigQuery, –∞–Ω–∞–ª–∏–∑, –∫–æ–¥, –ø—Ä–æ–≤–µ—Ä–∫–∞), –æ–±–Ω–æ–≤–ª—è—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `agent_results`.
5. –ê–≥–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç –≤–µ–±—Ö—É–∫ `/webhook/agent-result`; –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏, –∫–æ–≥–¥–∞ –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ Gemini.
6. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ –æ—Ç—á—ë—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Firestore; –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ Cloud Tasks –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∫–∞–Ω–∞–ª).

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏ (REST)
- `POST /tasks/{task_id}/subtasks/{subtask_id}/retry` ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø–æ–¥–∑–∞–¥–∞—á–∏ —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º `reason`.
- `POST /tasks/{task_id}/subtasks/{subtask_id}/cancel` ‚Äî –æ—Ç–º–µ–Ω–∞ –æ–∂–∏–¥–∞—é—â–µ–π –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—é—â–µ–π—Å—è –ø–æ–¥–∑–∞–¥–∞—á–∏.
- `POST /tasks/{task_id}/subtasks/{subtask_id}/prioritize` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (`{"priority": 80, "reason": "..."}`).

–û—Ç–≤–µ—Ç `/tasks/{id}` –≤–∫–ª—é—á–∞–µ—Ç `artifacts` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `packages` —Å –∞—Ä—Ö–∏–≤–∞–º–∏) –∏ `events` —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.


### –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
- –õ–æ–≥–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –∞–≥–µ–Ω—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Cloud Logging; –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –≤—ã–≤–æ–¥–µ.
- Firestore —Ö—Ä–∞–Ω–∏—Ç –ø–æ–ª–Ω—ã–π —Ç—Ä–µ–π—Å (`trace_id`, —Å—Ç–∞—Ç—É—Å—ã –ø–æ–¥–∑–∞–¥–∞—á, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤).
- Endpoint `/tasks/{id}` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å, –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –°–∫—Ä–∏–ø—Ç `monitoring/monitor.py` –º–æ–∂–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å Firestore –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ Cloud Monitoring.
- `/health` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—ã—Å—Ç—Ä—ã–π —Å–∏–≥–Ω–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ `pytest` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `pytest test_system.py`) –¥–ª—è smoke-—Ç–µ—Å—Ç–æ–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.
- `scripts/run_checks.ps1` –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç `ruff`, `black --check`, `mypy` –∏ `pytest`, –µ—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.
- –î–ª—è –±–µ–∑–æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `LOCAL_MODE=1`; Pub/Sub –∏ Firestore —ç–º—É–ª–∏—Ä—É—é—Ç—Å—è, –∞ Gemini –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º.
- –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å `bash deploy.sh --dry-run` (–¥–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥ –≤ —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) –∏–ª–∏ `terraform plan`.

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç `multi-agent-system` —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ä–æ–ª—è–º–∏ (—Å–º. `deploy.sh`).
- –•—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Secret Manager; –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–ª—é—á–∏ –≤ `.env` –∏–ª–∏ Git.
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Cloud Run (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ IAP) –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–æ–∫–µ–Ω–∞/HMAC –≤ `/webhook/agent-result`.
- –î–ª—è GitHub/BigQuery –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–∫–ª—é—á–∏—Ç–µ –∫–≤–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥; —Å–µ–∫—Ä–µ—Ç—ã –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ `--update-secrets`.

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- Cloud Functions/Run –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –¥–æ –Ω—É–ª—è; –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–∞–π–º-–∞—É—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
- Pub/Sub –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–∫–∞–∑ –ø–æ `task_id`, —á—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é –∏ DLQ.
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–º. `shared/utils.py::CacheManager`) –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∂–∞—Ç—å –≤—ã–∑–æ–≤—ã –≤–Ω–µ—à–Ω–∏—Ö API.
- –í `deploy.sh` –¥–æ–±–∞–≤—å—Ç–µ –±—é–¥–∂–µ—Ç—ã –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è (GCP Budgets) –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤.

### –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥).
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∞–≤—Ç–æ—É–ª—É—á—à–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤.
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å WebSocket/Server-Sent Events –¥–ª—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –¥–∞—à–±–æ—Ä–¥-–ø–∞–Ω–µ–ª—å (web) —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∑–∞–¥–∞—á.
- [ ] –í–≤–µ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –≤–∫–ª–∞–¥
- –°–æ–æ–±—â–∞–π—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —á–µ—Ä–µ–∑ GitHub Issues –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è.
- –ü–µ—Ä–µ–¥ PR –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `scripts/run_checks.ps1` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI.
- PR –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è, —Ç–µ—Å—Ç—ã (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) –∏ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

### –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã
- –ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ MIT (—Å–º. `LICENSE`).
- –î–ª—è –±–∏–∑–Ω–µ—Å-–≤–æ–ø—Ä–æ—Å–æ–≤ –ø–∏—à–∏—Ç–µ –Ω–∞ `team@example.com`.

